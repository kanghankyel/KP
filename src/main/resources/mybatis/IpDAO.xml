<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kidsplace.kidsplace.dao.IpDAO">

    <resultMap id="ipMap" type="com.kidsplace.kidsplace.commons.IpVO">
        <id property="vIpAddress" column="vIpAddress" />
        <id property="vVisitTime" column="vVisitTime" />
    </resultMap>

    <!-- 접속한 ip정보 넣기 -->
    <insert id="insertIp">
        INSERT INTO
            kidslandIP(vIpAddress)
        VALUES
            (
                #{clientIp}
            )
    </insert>

    <!-- 방문자 통계(24시간 limit) -->
    <select id="adminVisitSum" resultType = "int">
        SELECT
            COUNT(DISTINCT vIpAddress) AS vCount
        FROM
            kidslandIP
        WHERE
            vVisitTime <![CDATA[>=]]> CURDATE()
        AND
            vVisitTime <![CDATA[<]]> CURDATE() + INTERVAL 1 DAY
    </select>

</mapper>